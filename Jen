pipeline {
    agent any
    stages {
        stage('Checkout') {
            steps {
                // Always use Jenkins-managed WORKSPACE, not hardcoded path
                checkout scm
            }
        }

        stage('Prepare HTML Project') {
            agent { label 'win-agent-2' }
            steps {
                dir("${WORKSPACE}") {
                    // Clean workspace before fresh checkout
                    deleteDir()
                    checkout scm
                }
            }
        }

        stage('Build') {
            steps {
                bat """
                if exist out rmdir /s /q out
                mkdir out
                echo Building HTML project...
                """
            }
        }
    }
}
